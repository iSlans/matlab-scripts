format compact
format rational
% format short

logging all
% logging debug

% x3 <= 20/100(x1+x2+x3)
% x1 >= 40/100(x1+x2+x3)

% c = [10000 0 0];
% A = [
%     16 81 10
%     20 30 62
%     31 42 51
%     -1 0 0
%     0 -1 0
%     0 0 -1
%     ];
% b = [(5 * 60) (8 * 60) (8 * 60) 0 0 0];

% x = linprog(-c, A, b)

%%
% ---------------------------------- simplex --------------------------------- %
c = [10 15 22];
A = [
    16 81 10
    20 30 62
    31 42 51
    -1 -1 4
    -3 2 2
    -1 0 0
    0 -1 0
    0 0 -1
    ];
b = [(5 * 60) (8 * 60) (8 * 60) 0 0 0 0 0];

% initial_x = [23 0 0 13];
initial_x = [480/31 0 0]
baseIndex = find(A * initial_x' == b');
baseIndex

% primalSimplex(c, A, b, [2 3 6 7])
% primalSimplex(c, A, b, baseIndex, depthLimit = 2)

% linprog(-c, A, b)
intlinprog(-c, [1 2 3], A, b)

%%
% ---------------------------------- gomory ---------------------------------- %
% remember: dual form
% no x >= 0 in A

c = [10 15 22];
A = [
    16 81 10 1 0 0 0 0
    20 30 62 0 1 0 0 0
    31 42 51 0 0 1 0 0
    -1 -1 4 0 0 0 1 0
    -3 2 2 0 0 0 0 1
    ];
b = [(5 * 60) (8 * 60) (8 * 60) 0 0];

gomory(-c, A, b);

%%

At = 10561 * [
    -219/10561 334/10561 -266/757
    175/10561 -74/10561 109/2275
    -11/10561 65/10561 451/2590
    -188/10561 -783/974 -1265/243
    -284/3045 599/6202 -2138/1427]

%%

% c = [30 30 35 35];
% A = [
%     5 0 7 0
%     0 5 0 7
%     1 1 0 0
%     0 0 1 1
%     0 4 0 5
%     ];
% b = [119 91 23 15 72];
% lb = [0 0 0 0];
% ub = [];
% linprog(-c, A, b, [], [], lb, ub)

%%
% ---------------------------- optimal intlinprog ---------------------------- %

% c = [30 30 35 35];
% A = [
%     5 0 7 0
%     0 5 0 7
%     1 1 0 0
%     0 0 1 1
%     ];
% b = [119 91 23 15];
% ints = [1 2 3 4]
% lb = [0 0 0 0];
% ub = [];

% intlinprog(-c, ints, A, b, [], [], lb, ub)
